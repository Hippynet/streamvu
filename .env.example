# =============================================================================
# StreamVU Docker Deployment Configuration
# =============================================================================
# Copy this file to .env before running docker-compose
#
# For development: docker-compose up
# For production:  docker-compose -f docker-compose.prod.yml up
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED Configuration
# -----------------------------------------------------------------------------

# [REQUIRED] PostgreSQL password
POSTGRES_PASSWORD=change-this-secure-password

# [REQUIRED] JWT secret for authentication
# Generate with: openssl rand -base64 64
JWT_SECRET=change-this-to-a-secure-random-string

# [REQUIRED for production] Public URL of the API
# Example: https://api.streamvu.example.com
PUBLIC_URL=http://localhost:3002

# [REQUIRED for production] Public URL of the frontend
# Example: https://streamvu.example.com
FRONTEND_URL=http://localhost:3003

# [REQUIRED for WebRTC] Public IP address for media server
# This must be reachable by clients (your server's public IP)
MEDIASOUP_ANNOUNCED_IP=127.0.0.1

# -----------------------------------------------------------------------------
# Optional Configuration
# -----------------------------------------------------------------------------

# PostgreSQL configuration
POSTGRES_USER=streamvu
POSTGRES_DB=streamvu

# JWT token expiry
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# Server ports
API_PORT=3001
WEB_PORT=3000

# CORS allowed origins (defaults to FRONTEND_URL)
# For multiple origins: https://app1.example.com,https://app2.example.com
# CORS_ORIGIN=https://streamvu.example.com

# Frontend API URL (defaults to PUBLIC_URL)
# VITE_API_URL=https://api.streamvu.example.com

# -----------------------------------------------------------------------------
# Google OAuth (Optional)
# -----------------------------------------------------------------------------
# Get credentials from: https://console.cloud.google.com/apis/credentials

# GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-client-secret
# GOOGLE_CALLBACK_URL=https://api.streamvu.example.com/api/auth/google/callback

# -----------------------------------------------------------------------------
# WebRTC / mediasoup Configuration
# -----------------------------------------------------------------------------

# Port range for WebRTC media (UDP)
MEDIASOUP_MIN_PORT=40000
MEDIASOUP_MAX_PORT=40100

# TURN server for NAT traversal (recommended for production)
# TURN_HOST=turn.example.com
# TURN_PORT=3478
# TURN_USERNAME=turnuser
# TURN_PASSWORD=turnpassword

# -----------------------------------------------------------------------------
# Integrations (Optional)
# -----------------------------------------------------------------------------

# WHMCS webhook secret for billing integration
# WHMCS_SECRET=your-whmcs-webhook-secret

# -----------------------------------------------------------------------------
# Logging & Monitoring
# -----------------------------------------------------------------------------

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Trusted proxies for X-Forwarded-For header (comma-separated)
# TRUSTED_PROXIES=127.0.0.1,10.0.0.0/8

# Application version (shown in UI)
APP_VERSION=1.0.0

# =============================================================================
# Quick Start Guide
# =============================================================================
#
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Set the required values (at minimum):
#    - POSTGRES_PASSWORD
#    - JWT_SECRET
#    - PUBLIC_URL (your API domain)
#    - FRONTEND_URL (your frontend domain)
#    - MEDIASOUP_ANNOUNCED_IP (your server's public IP)
#
# 3. Start the services:
#    docker-compose -f docker-compose.prod.yml up -d
#
# 4. Run database migrations:
#    docker-compose -f docker-compose.prod.yml exec api npx prisma migrate deploy
#
# 5. Access the application at your FRONTEND_URL
#
# =============================================================================
